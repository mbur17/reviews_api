# Reviews API

API для сбора отзывов на произведения.

## Описание

Проект агрегирует отзывы пользователей на фильмы, книги, музыку и другие произведения, позволяя пользователям оставлять оценки и комментарии.

### Возможности

API предоставляет следующие возможности:

-   **Регистрация пользователей и выдача токенов**: поддерживает регистрацию и авторизацию через JWT.
-   **Управление категориями и жанрами**: администраторы могут добавлять и удалять категории и жанры для произведений.
-   **Работа с произведениями**: создание, удаление и обновление произведений (например, фильмов, книг) доступно администраторам.
-   **Отзывы и комментарии**: пользователи могут оставлять отзывы и комментарии, а также ставить оценки произведениям.

### Пользовательские роли

-   **Аноним** — доступ к чтению информации.
-   **Аутентифицированный пользователь** (`user`) — возможность оставлять отзывы и комментарии, редактировать и удалять свои записи.
-   **Модератор** (`moderator`) — права пользователя, плюс возможность удалять чужие отзывы и комментарии.
-   **Администратор** (`admin`) — полный доступ к управлению контентом и пользователями.
-   **Суперюзер Django** — обладает правами администратора.

## Установка

1.  Клонируйте репозиторий:
    
```bash
 git clone https://github.com/username/yamdb_project.git
 cd yamdb_project
 ```
    
2.  Установите зависимости:
    
```bash
pip install -r requirements.txt
```
    
3.  Выполните миграции:
    
```bash
python manage.py migrate
```
    
4.  Создайте суперпользователя для доступа к административной панели:
    
```bash
python manage.py createsuperuser
```
    
5.  Запустите сервер разработки:
    
```bash
python manage.py runserver
```
    

## Документация API

Документация доступна по пути `/redoc/`.


## Примеры запросов

### Регистрация нового пользователя

**Запрос:**

```http
POST /api/v1/auth/signup/
Content-Type: application/json
{
    "email": "user@example.com",
    "username": "username"
}
```

**Ответ:**

```json
{
    "username": "username",
    "email": "user@example.com",
    "detail": "Код подтверждения отправлен на email."
}
```

### Получение JWT-токена

**Запрос:**

```http
POST /api/v1/auth/token/
Content-Type: application/json
{
    "username": "username",
    "confirmation_code": "123456"
}
```

**Ответ (успешный запрос):**

```json
{
    "token": "eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9..."
}
```

**Ответ (ошибка 404 — пользователь не найден):**

```json
{
    "detail": "Пользователь не найден."
}
```

### Добавление произведения (доступно только администраторам)

**Запрос:**

```http
POST /api/v1/titles/
Content-Type: application/json
Authorization: Bearer <admin_token>
{
    "name": "Интерстеллар",
    "year": 2014,
    "description": "Фантастический фильм о путешествиях во времени и пространстве.",
    "genre": ["sci-fi"],
    "category": "movies"
}
```

**Ответ:**

```json
{
    "id": 1,
    "name": "Интерстеллар",
    "year": 2014,
    "description": "Фантастический фильм о путешествиях во времени и пространстве.",
    "genre": [{"name": "sci-fi"}],
    "category": {"name": "movies"},
    "rating": null
}
```

### Оставить отзыв на произведение

**Запрос:**

```http
POST /api/v1/titles/1/reviews/
Content-Type: application/json
Authorization: Bearer <user_token>
{
    "text": "Фильм великолепен!",
    "score": 9
}
```

**Ответ:**

```json
{
    "id": 1,
    "author": "username",
    "text": "Фильм великолепен!",
    "score": 9,
    "pub_date": "2023-12-31T23:59:59Z"
}
```

## Основные эндпоинты

-   **/api/v1/auth/signup/** - регистрация пользователя
-   **/api/v1/auth/token/** - получение JWT-токена
-   **/api/v1/categories/** - управление категориями
-   **/api/v1/genres/** - управление жанрами
-   **/api/v1/titles/** - управление произведениями
-   **/api/v1/users/** - управление пользователями

## Авторы проекта:

-   Наворски Роберт (https://github.com/robertnaworski)
-   Буряковский Максим (https://github.com/mbur17)
-   Полушин Максим (https://github.com/Lasellar)
